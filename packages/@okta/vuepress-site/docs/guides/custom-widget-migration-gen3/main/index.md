---
title: Migrate to the third generation (Gen3) of the Sign-In Widget
excerpt: Learn how to migrate to the third generation (Gen3) of the Sign-In Widget.
layout: Guides
---
<ApiLifecycle access="ie" />

This guide explains how to migrate from the second (Gen2) to the third generation (Gen3) of the Okta Sign-In Widget.

> **Note:** This document is only for Okta Identity Engine. See [Identify your Okta solution](https://help.okta.com/okta_help.htm?type=oie&id=ext-oie-version) to determine your Okta version.

---

#### Learning outcomes

* Upgrade from Gen2 to Gen3 of the Sign-In Widget.
* Use design tokens to adapt your existing customizations to Gen3.
* Use the recommended functions for Gen3.
* Roll back to the second generation, if necessary, without affecting other code in your Sign-In Widget template.


#### What you need

* [Okta Integrator Free Plan org](https://developer.okta.com/signup/)
* [Custom URL domain](/docs/guides/custom-url-domain/main/)
* [Node v12.22 or later, earlier than v16](https://nodejs.org/en/download/)

#### Sample code

[Gen3 design tokens - customization examples](/docs/guides/custom-widget-gen3/main/#customization-examples)

---

## About customizations of Gen3

Gen3 of the Sign-In Widget offers the same user experience as the second generation, and adds accessibility improvements in color contrast, focus management, and screen reader behavior. It establishes a foundation for improvements in customization and globalization.

Still, there are a few key differences between Gen2 and Gen3. Consider the following:

* [CSS and design tokens]()
* [jQuery and Preact]()

See [Sign-In Widget, third generation](https://help.okta.com/okta_help.htm?type=oie&id=ext-compare-siw) to verify if the third generation is right for your org.

### CSS and design tokens

Unlike [Gen2](/docs/guides/custom-widget/main/#style-for-redirect-authentication), Gen3 of the Sign-In Widget doesn’t use fixed CSS class names (className). See [Custom buttons](/docs/guides/custom-widget/main/#custom-buttons) for an example.

You can still use CSS to style Gen3 of the Sign-In Widget. However, without fixed `className` selectors, you can’t reliably style widget elements with `className`-based overrides.

Instead, Gen3 uses [design tokens](/docs/guides/custom-widget-gen3/main/#use-design-tokens).

Design tokens make the Sign-In Widget's visual style consistent and easier to update. Tokens replace static values to customize the following:
* Color
* Border
* Font family
* Font size
* Font weight
* Line height
* Spacing

See [Customization Examples](/docs/guides/custom-widget-gen3/main/#customization-examples).

> **Note:** Gen3 also offers autogenerated palettes that preserve accessible color contrast ratios. See the [Odyssey by Okta design system](https://odyssey.okta.design/latest/foundations/accessibility/color-9O9a4XAU) and [Palette generation and accessibility](/docs/guides/custom-widget-gen3/main/#palette-generation-and-accessibility).

### jQuery and Preact

Gen3 is built on [Preact](https://preactjs.com/), a lightweight [React Native](https://reactnative.dev/) alternative. The architecture changes from jQuery-based (Gen2) to Preact-based (Gen3). As a result, each generation of the Sign-In Widget handles DOM manipulations in a different way.

For example, the `afterRender` function doesn’t work in Gen3 as it does in Gen2. See [About afterTransform and afterRender](#about-aftertransform-and-afterrender) for more information.

## Upgrade to Gen3

You can upgrade to Gen3 in a few different ways:

* Use the Admin Console.
* Use the API.

> **Note:** If you have a new Identity Engine org, Gen3 isn't enabled by default.

### Use the Admin Console

To upgrade to Gen3:

1. In the **Admin Console**, go to **Customizations** > **Brands**.
1. Select a brand.
1. Go to the **Pages** tab, and then click **Edit** or **Configure** for the **Sign-in page**.
1. Click the **Settings** tab.
1. In the **Sign-In Widget version** section, click **Edit**.
1. Turn on the **Use the third generation** toggle.
1. Click **Save to draft**.
1. Click **Publish**.

See [Brands](/docs/concepts/brands/) for more details about brands in Okta.

### Use the API

Send a PUT request to the `https://{yourOktaDomain}/api/v1/brands/{brandId}/pages/sign-in/customized` endpoint. Include the following:

* Provide a value for the domain:
  * If you want to upgrade the `widgetGeneration` of your default [brand](/docs/concepts/brands/), use the value of your org domain. See [Find your Okta domain](/docs/guides/find-your-domain/main/#find-your-okta-domain).
  * If you want to upgrade another brand in your org, use the custom domain associated with the brand. See [About Okta domain customization](/docs/guides/custom-url-domain/main/#about-okta-domain-customization).
* Provide a value for `brandId`. Ensure that it’s the ID associated with the domain or custom domain that you want to upgrade.
* In the `widgetCustomizations` object, set `widgetGeneration` to `G3`. See [widgetGeneration](https://developer.okta.com/docs/api/openapi/okta-management/management/tag/CustomPages/#tag/CustomPages/operation/replaceCustomizedSignInPage!path=widgetCustomizations/widgetGeneration&t=request).

See [Replace the customized sign-in page](https://developer.okta.com/docs/api/openapi/okta-management/management/tag/CustomPages/#tag/CustomPages/operation/replaceCustomizedSignInPage!path=widgetCustomizations/widgetGeneration&t=request) for more details.

## Add design tokens to your code


### Design token examples


## Use the useSiwGen3 variable


## About afterTransform and afterRender


### Use the afterTransform function (recommended)


#### Change button text examples




#### Remove an unused link example



#### Add an instructional paragraph example



### Use the afterRender function (not recommended)


#### Use MutationObserver for DOM manipulations



#### Use afterRender for non-DOM manipulations




## See also

